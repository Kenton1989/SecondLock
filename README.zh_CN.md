<img src="./src/pages/images/logo.svg" alt="Logo of the project" align="right" width="128px">

# SecondLock (Chrome 插件)

[English README](README.md)

---

一个基于[@老师好我叫何同学 的视频][mr_he_video]的全新时间管理插件。你需要在打开各种花里胡哨的网页之前，设置浏览时限。

安装SecondLock之后，在打开网页之前，你必须设置一个时间限制。打开网页前的这一刻将会是你理智尚存的最后一刻，请三思之后设一个解锁时长。然后你就可以随意浪了。SecondLock将会在倒计时结束之后挡住页面并提示你。

> 打开手机之前问问自己
>
> - 你为什么打开手机
> - 你要看多长时间
> - 你还能去做什么
>
> -- [@老师好我叫何同学][mr_he_channel]

上面三个问题在浏览网页之前同样适用。

# 功能

- 自动网页监控，拦截，计时，解锁
- 自定义网站黑/白名单
- 多功能弹窗
  - 倒计时显示
  - 提前结束倒计时
- 自定义解锁时长选择页面
- 自定义倒计时结束页面

# 安装

插件暂未在 Chrome Web Store 发布。

插件暂未在 Firefox Browser Add-ons 发布。

# 软件要求与依赖

总之用最新版 Chrome 和 Firefox 就肯定没问题。

测试时的浏览器版本为 Chrome 89.0 和 Firefox 86.0

懒得测旧版本的兼容性了（

暂未在其它基于Chromium的浏览器上测试兼容性。

# 更新日志

- v0.5.0
  - 支持用户设置同步

- v0.4.0
  - 用React.js重写了前端
  - 支持倒计时结束页面现实的文字
  - 支持当所有标签页被SecondLock关闭时，打开一个新标签页

- v0.3.0
  - 兼容Firefox

- v0.2.1

  - 更换插件名字
  - 修复Bug：提前结束计时关闭页面时，白名单会失效

- v0.2.0

  - 支持简体中文
  - 手动提前结束计时
  - 显示本地储存空间占用情况

- v0.1.2

  - 自定义网页白名单

- v0.1.1

  - 自定义默认解锁时长选项

- v0.1.0
  - 自动网页监控，拦截，计时，解锁
  - 自定义网页黑名单
  - 倒计时显示

# TODO

- [ ] 弹窗：当前页面加入黑名单
- [ ] 用户指南
- [ ] 倒计时通知
- [ ] 冷静时间
- [ ] 自定义监视运行时间
- [ ] 自定义格言（集合）
- [ ] 设置导出/导入
- [ ] 选项：自定义时间到时的拦截页面
- [ ] 选项：在选解锁时间时，设置倒计时结束时的消息
- [ ] 在各个选项旁加入问号，以显示详细解释
- [ ] 各网站共用计时器
- [x] 设置同步
- [x] 选项：时间到时直接关网页，不显示提示页面
- [x] 在倒计时结束页面显示自定义信息
- [x] 选项：关闭窗口所有tab时，留一个新标签页
- [x] 挑个前端框架重写前端
- [x] 兼容Firefox
- [x] 时间选择页面：按解锁时间结束时间点设置，而非时间长度
- [x] 中英双语支持
- [x] 弄好 Readme（格式和语言）
- [x] 自定义默认解锁时间
- [x] 鸣谢列表
- [x] 提前结束计时
- [x] 白名单
- [x] 打开网站前要确定使用时间
- [x] 黑名单
- [x] 倒计时显示
- [x] 弄个好看点的 icon
- 想到但不想做的功能
  - [ ] 限制储存空间
  - [ ] 累计用时显示/限制
  - [ ] 数据统计

# 鸣谢

感谢以下人物对本插件的帮助：

- [@老师好我叫何同学][mr_he_channel]：一切的灵感来源
- [@KeithHenry](https://github.com/KeithHenry)：提供了将chrome里基于callback的API转成基于Promise的API的支持[[Source]](https://github.com/KeithHenry/chromeExtensionAsync)
- [@lxieyang](https://github.com/lxieyang/)：提供了基于React.js开发浏览器插件的模板[[Source]](https://github.com/lxieyang/chrome-extension-boilerplate-react)


# 开发日志

### 2021/04/18

- 基本完成设置云同步支持

### 2021/04/15

- 开始搞设置云同步支持

### 2021/03/29

- 移植选项页面
- 支持自定义倒计时结束页面的文字
- 支持当插件关闭所有页面时，在顶层窗口打开一个新标签页

### 2021/03/27

- 移植解锁时长选择页面
- 移植倒计时结束界面

### 2021/03/26

- 决定使用React.js做前端
- 开始移植前端代码
- Popup窗口基本移植完成

### 2021/03/22

- 逐渐觉得用老三件写UI好TM狗屎，尤其是设置页面这种内容多的
- 开始挑前端框架学

### 2021/03/14

- 基本兼容Firefox

### 2021/03/08

- 支持按结束时间点设置解锁时间
- 把插件名字换成SecondLock（版权警告）

### 2021/03/07

- 修复一个白名单可能失效的 bug
- 重写 README
- 翻译页面

### 2021/03/06

- 优化选项界面
- 优化 dynamic page 结构

### 2021/03/05

- 完成快速结束倒计时功能

### 2021/03/04

- 完成白名单

### 2021/03/02

- 完成自定义默认时间列表

### 2021/03/01

- 多立了一堆 flag
- translation: 1% completed

### 2021/02/27

- 基本完成默认设置
- 基本完成自定义监控列表 （核心功能 2）
- （好家伙直接咕了一个月）

### 2021/02/26

- 封装了一下用户设置

### 2021/01/26 ~ 02/04

- 小修小补
- Celeste 真好玩
- 课业好烦
- 随便搞一下设置页面

### 2021/01/25

- 完善计时模块
- 完成核心功能 1：时间选择与计时拦截
- 完成 BrowserAction 中的倒计时显示 (popup.html)
- 初步完成黑名单 UI

### 2021/01/24

- 完善动态页面模块
- 完善用户浏览页面监视模块
- 实现计时模块 (lock-timing-monitor.js)
- 完成两个障碍界面的功能 (time-selection.html & blocking.html)

### 2021/01/22

- 实现动态页面模块 (dynamic-page.js & dynamic-page-backend.js)
- 实现用户浏览页面监视模块 (browsing-page-monitor.js)

### 2021/01/21

- 初步完成 UI 设计

### 2021/01/20

- 加了一堆意义不明的 CSS
- 初步确定前后端(?)结构

### 2021/01/17

- 确定了拦截页面的策略：通过打开一个新 tab 来挡住页面。
- 初步确定了侦测页面切换的逻辑。
- 现存 Bug：
  - 一次窗口内 Tab 切换可能触发两次拦截（谜之 bug）。
  - 同时出现窗口切换和 Tab 切换时可能会触发两次拦截。

### 2021/01/16

- 开坑
- 画了一个草率的 Logo
- 嗯学 Chrome Extension 开发

[mr_he_channel]: https://space.bilibili.com/163637592
[mr_he_video]: https://www.bilibili.com/video/BV1ev411x7en
[mr_he_app]: http://download.yitangyx.cn/test/student-he/new.html?202001
